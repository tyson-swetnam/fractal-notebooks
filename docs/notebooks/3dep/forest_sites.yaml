# Forest Sites Configuration for 3DEP CHM Generation
#
# Each site defines an area of interest for Canopy Height Model processing.
# Bounding boxes are in EPSG:4326 (WGS84): [west, south, east, north]
#
# Resolution is determined automatically based on point density:
#   >= 12 pts/m² -> 0.333m resolution
#   <  12 pts/m² -> 0.5m resolution

sites:
  # ============================================================================
  # PACIFIC NORTHWEST - Temperate Rainforests
  # ============================================================================

  sequoia_giant_forest:
    name: "Sequoia Giant Forest"
    description: "Home to the largest trees on Earth by volume"
    state: "CA"
    forest_type: "giant_sequoia"
    bbox: [-118.77, 36.55, -118.72, 36.60]
    expected_max_height_m: 95
    notes: "Contains General Sherman tree (84m tall, largest by volume)"
    priority: 1

  redwood_humboldt:
    name: "Humboldt Redwoods"
    description: "Old-growth coast redwood forest"
    state: "CA"
    forest_type: "coast_redwood"
    bbox: [-123.98, 40.30, -123.90, 40.38]
    expected_max_height_m: 115
    notes: "Tallest trees on Earth - Hyperion (115.92m) nearby"
    priority: 1

  olympic_hoh:
    name: "Olympic Hoh Rainforest"
    description: "Temperate rainforest with massive Sitka spruce"
    state: "WA"
    forest_type: "temperate_rainforest"
    bbox: [-123.95, 47.82, -123.88, 47.88]
    expected_max_height_m: 75
    notes: "One of few temperate rainforests in North America"
    priority: 2

  tongass_mendenhall:
    name: "Tongass Mendenhall Valley"
    description: "Largest US national forest"
    state: "AK"
    forest_type: "temperate_rainforest"
    bbox: [-134.60, 58.38, -134.50, 58.45]
    expected_max_height_m: 60
    notes: "Sitka spruce and western hemlock dominant"
    priority: 2

  # ============================================================================
  # ROCKY MOUNTAINS - Conifer Forests
  # ============================================================================

  yellowstone_lodgepole:
    name: "Yellowstone Lodgepole Pine"
    description: "Post-1988 fire regeneration study area"
    state: "WY"
    forest_type: "lodgepole_pine"
    bbox: [-110.45, 44.55, -110.38, 44.62]
    expected_max_height_m: 30
    notes: "Regenerating forest after 1988 fires"
    priority: 2

  rocky_mountain_subalpine:
    name: "Rocky Mountain Subalpine"
    description: "High-elevation spruce-fir forest"
    state: "CO"
    forest_type: "spruce_fir"
    bbox: [-105.65, 40.28, -105.58, 40.35]
    expected_max_height_m: 35
    notes: "Near treeline, Engelmann spruce and subalpine fir"
    priority: 3

  # ============================================================================
  # SOUTHWEST - Ponderosa Pine
  # ============================================================================

  coconino_ponderosa:
    name: "Coconino Ponderosa Pine"
    description: "Largest ponderosa pine forest in North America"
    state: "AZ"
    forest_type: "ponderosa_pine"
    bbox: [-111.65, 35.15, -111.58, 35.22]
    expected_max_height_m: 40
    notes: "Open parkland structure, frequent fire regime"
    priority: 2

  gila_mixed_conifer:
    name: "Gila Mixed Conifer"
    description: "Sky island forest ecosystem"
    state: "NM"
    forest_type: "mixed_conifer"
    bbox: [-108.22, 33.22, -108.15, 33.28]
    expected_max_height_m: 35
    notes: "Isolated mountain forest ecosystem"
    priority: 3

  # ============================================================================
  # EASTERN DECIDUOUS - Hardwood Forests
  # ============================================================================

  great_smoky_cove:
    name: "Great Smoky Mountains Cove Forest"
    description: "Most biodiverse temperate forest in North America"
    state: "TN"
    forest_type: "mixed_mesophytic"
    bbox: [-83.52, 35.58, -83.45, 35.65]
    expected_max_height_m: 55
    notes: "UNESCO World Heritage Site, exceptional biodiversity"
    priority: 1

  mark_twain_ozark:
    name: "Mark Twain Ozark Highlands"
    description: "Oak-hickory forest of the Ozarks"
    state: "MO"
    forest_type: "oak_hickory"
    bbox: [-91.55, 37.42, -91.48, 37.48]
    expected_max_height_m: 35
    notes: "Central hardwood forest region"
    priority: 3

  white_mountain_northern:
    name: "White Mountain Northern Hardwood"
    description: "Classic New England forest"
    state: "NH"
    forest_type: "northern_hardwood"
    bbox: [-71.38, 44.08, -71.30, 44.15]
    expected_max_height_m: 35
    notes: "Sugar maple, beech, yellow birch dominant"
    priority: 2

  # ============================================================================
  # BOREAL/NORTHERN - Mixed Forests
  # ============================================================================

  boundary_waters:
    name: "Boundary Waters Wilderness"
    description: "Boreal-northern hardwood transition"
    state: "MN"
    forest_type: "boreal_mixed"
    bbox: [-91.85, 48.02, -91.78, 48.08]
    expected_max_height_m: 25
    notes: "Red and white pine, paper birch, aspen"
    priority: 3

  superior_old_growth:
    name: "Superior Old Growth"
    description: "Ancient boreal forest remnants"
    state: "MN"
    forest_type: "boreal_conifer"
    bbox: [-90.08, 47.95, -90.00, 48.02]
    expected_max_height_m: 30
    notes: "Some of the oldest trees in the upper Midwest"
    priority: 3

  # ============================================================================
  # SOUTHEASTERN - Pine Forests
  # ============================================================================

  ocala_longleaf:
    name: "Ocala Longleaf Pine"
    description: "Florida sandhill longleaf pine ecosystem"
    state: "FL"
    forest_type: "longleaf_pine"
    bbox: [-81.85, 29.18, -81.78, 29.25]
    expected_max_height_m: 35
    notes: "Fire-maintained longleaf pine savanna"
    priority: 2

  conecuh_longleaf:
    name: "Conecuh Longleaf"
    description: "Gulf Coastal Plain longleaf pine"
    state: "AL"
    forest_type: "longleaf_pine"
    bbox: [-86.55, 31.12, -86.48, 31.18]
    expected_max_height_m: 35
    notes: "Red-cockaded woodpecker habitat"
    priority: 3

  # ============================================================================
  # SPECIAL RESEARCH SITES
  # ============================================================================

  harvard_forest:
    name: "Harvard Forest LTER"
    description: "Long-term ecological research site"
    state: "MA"
    forest_type: "transition_hardwood"
    bbox: [-72.20, 42.52, -72.16, 42.55]
    expected_max_height_m: 30
    notes: "NEON site with extensive ground truth data"
    priority: 1

  wind_river:
    name: "Wind River Experimental Forest"
    description: "Old-growth Douglas-fir research site"
    state: "WA"
    forest_type: "douglas_fir"
    bbox: [-122.00, 45.80, -121.93, 45.86]
    expected_max_height_m: 65
    notes: "AmeriFlux tower site with carbon flux data"
    priority: 1

  niwot_ridge:
    name: "Niwot Ridge LTER"
    description: "Alpine/subalpine research site"
    state: "CO"
    forest_type: "subalpine"
    bbox: [-105.60, 40.03, -105.55, 40.07]
    expected_max_height_m: 20
    notes: "Treeline dynamics and alpine tundra"
    priority: 2

# Processing configuration
processing:
  # Resolution rules
  density_threshold: 12  # points per m²
  resolution_high: 0.333  # meters (for >= threshold)
  resolution_standard: 0.5  # meters (for < threshold)

  # Pipeline options
  filter_noise: true
  output_crs: 3857  # Web Mercator

  # No smoothing or interpolation
  dsm_method: "max"  # Highest point per cell
  dtm_method: "min"  # Lowest ground point per cell
  smoothing: "none"
  interpolation: "none"

  # Output formats
  output_format: "GeoTIFF"
  compression: "LZW"
  generate_cog: true  # Cloud-Optimized GeoTIFF
  generate_preview: true  # PNG preview image

# Site groups for batch processing
groups:
  all_priority_1:
    description: "High-priority sites with ground truth or exceptional characteristics"
    sites:
      - sequoia_giant_forest
      - redwood_humboldt
      - great_smoky_cove
      - harvard_forest
      - wind_river

  pacific_northwest:
    description: "Pacific Northwest temperate rainforests"
    sites:
      - sequoia_giant_forest
      - redwood_humboldt
      - olympic_hoh
      - tongass_mendenhall
      - wind_river

  eastern_forests:
    description: "Eastern deciduous and mixed forests"
    sites:
      - great_smoky_cove
      - mark_twain_ozark
      - white_mountain_northern
      - harvard_forest

  research_sites:
    description: "Sites with existing LTER/NEON infrastructure"
    sites:
      - harvard_forest
      - wind_river
      - niwot_ridge

  fire_ecology:
    description: "Fire-maintained or post-fire ecosystems"
    sites:
      - yellowstone_lodgepole
      - coconino_ponderosa
      - ocala_longleaf
      - conecuh_longleaf
